<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Teacher Profile - EduAI</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="particles">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>
    
    <button class="sidebar-toggle" onclick="toggleSidebar()">‚ò∞</button>
    <nav class="sidebar">
        <a href="/" class="logo">EduAI</a>
        <ul class="nav-links">
            <li><a href="/teacher_dashboard">Dashboard</a></li>
            <li><a href="/create_exam">Create Exam</a></li>
            <li><a href="/view_answers">View Answers</a></li>
            <li><a href="/view_results">View Results</a></li>
            <li><a href="/teacher/profile">Profile</a></li>
            <li><a href="/logout">Logout</a></li>
        </ul>
    </nav>
    
    <main>
        <section class="form-section admin-form-section">
            <h1>Edit Teacher Profile</h1>
            <p>Welcome, {{ name }}!</p>
            
            <div class="flash-messages">
                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        {% for category, message in messages %}
                            <div class="flash {{ category }}">{{ message }}</div>
                        {% endfor %}
                    {% endif %}
                {% endwith %}
            </div>

            <div style="margin-bottom: 2rem; padding: 1rem; background: rgba(72, 52, 212, 0.1); border-radius: 8px; border: 1px solid rgba(72, 52, 212, 0.2);">
                <h3 style="color: #4834d4; margin-bottom: 0.5rem;">‚úèÔ∏è Update Your Profile</h3>
                <p>Keep your profile information current to ensure the best experience on EduAI.</p>
            </div>

            <h2>Update Your Profile</h2>
            <form method="POST" class="form-group">
                <fieldset style="border: 1px solid rgba(72, 52, 212, 0.2); border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem;">
                    <legend style="color: #4834d4; font-weight: bold; padding: 0 0.5rem;">Account Information</legend>
                    
                    <div class="form-field">
                        <label for="email">Email Address</label>
                        <input type="text" id="email" name="email" value="{{ email }}" readonly style="background: rgba(248, 249, 250, 0.8); cursor: not-allowed;">
                        <small style="color: #666; display: block; margin-top: 0.25rem;">Email cannot be changed</small>
                    </div>
                </fieldset>

                <fieldset style="border: 1px solid rgba(72, 52, 212, 0.2); border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem;">
                    <legend style="color: #4834d4; font-weight: bold; padding: 0 0.5rem;">Personal Information</legend>
                    
                    <div class="form-field">
                        <label for="full_name">Full Name *</label>
                        <input type="text" id="full_name" name="full_name" value="{{ profile[0] if profile else '' }}" placeholder="Enter your full name" required>
                    </div>

                    <div class="form-field">
                        <label for="dob">Date of Birth *</label>
                        <input type="date" id="dob" name="dob" value="{{ profile[1].strftime('%Y-%m-%d') if profile and profile[1] else '' }}" required>
                    </div>

                    <div class="form-field">
                        <label for="contact">Contact Number *</label>
                        <input type="text" id="contact" name="contact" value="{{ profile[3] if profile else '' }}" placeholder="10-digit mobile number" required>
                    </div>

                    <div class="form-field">
                        <label for="gender">Gender *</label>
                        <select id="gender" name="gender" required>
                            <option value="Male" {% if profile and profile[4] == 'Male' %}selected{% endif %}>Male</option>
                            <option value="Female" {% if profile and profile[4] == 'Female' %}selected{% endif %}>Female</option>
                            <option value="Other" {% if profile and profile[4] == 'Other' %}selected{% endif %}>Other</option>
                        </select>
                    </div>

                    <div class="form-field">
                        <label for="address">Address *</label>
                        <textarea id="address" name="address" placeholder="Enter your full address" required rows="3">{{ profile[5] if profile else '' }}</textarea>
                    </div>
                </fieldset>

                <fieldset style="border: 1px solid rgba(72, 52, 212, 0.2); border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem;">
                    <legend style="color: #4834d4; font-weight: bold; padding: 0 0.5rem;">Academic Information</legend>
                    
                    <div class="form-field">
                        <label for="last_degree">Last Degree *</label>
                        <input type="text" id="last_degree" name="last_degree" value="{{ profile[2] if profile else '' }}" placeholder="e.g., M.Tech Computer Science" required>
                    </div>

                    <div class="form-field">
                        <label for="expertise">Area of Expertise *</label>
                        <input type="text" id="expertise" name="expertise" value="{{ profile[6] if profile else '' }}" placeholder="e.g., Machine Learning, Data Structures" required>
                    </div>

                    <div class="form-field">
                        <label for="subjects_taught">Subjects Taught *</label>
                        <textarea id="subjects_taught" name="subjects_taught" placeholder="List the subjects you teach" required rows="3">{{ profile[7] if profile else '' }}</textarea>
                    </div>

                    <div class="form-field">
                        <label for="department">Department *</label>
                        <input type="text" id="department" name="department" value="{{ profile[11] if profile else '' }}" placeholder="e.g., Computer Science" required>
                    </div>

                    <div class="form-field">
                        <label for="university">University *</label>
                        <input type="text" id="university" name="university" value="{{ profile[12] if profile else '' }}" placeholder="Your institution name" required>
                    </div>
                </fieldset>

                <fieldset style="border: 1px solid rgba(72, 52, 212, 0.2); border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem;">
                    <legend style="color: #4834d4; font-weight: bold; padding: 0 0.5rem;">Professional Experience</legend>
                    
                    <div class="form-field">
                        <label for="experience_years">Teaching Experience (Years) *</label>
                        <input type="number" id="experience_years" name="experience_years" value="{{ profile[8] if profile else '0' }}" min="0" step="0.5" required>
                    </div>

                    <div class="form-field">
                        <label for="industry_experience_years">Industry Experience (Years) *</label>
                        <input type="number" id="industry_experience_years" name="industry_experience_years" value="{{ profile[9] if profile else '0' }}" min="0" step="0.5" required>
                    </div>

                    <div class="form-field">
                        <label for="research_papers">Research Papers Published *</label>
                        <input type="number" id="research_papers" name="research_papers" value="{{ profile[10] if profile else '0' }}" min="0" required>
                    </div>
                </fieldset>

                <div class="form-navigation">
                    <button type="submit" class="submit-btn">Update Profile</button>
                    <a href="/teacher/profile" style="background: linear-gradient(45deg, #6c757d, #5a6268); color: white; padding: 0.8rem 1.5rem; border: none; border-radius: 8px; text-decoration: none; display: inline-block; margin-left: 1rem;">Cancel</a>
                </div>
            </form>

            <div style="margin-top: 2rem; padding: 1rem; background: rgba(255, 193, 7, 0.1); border-radius: 8px; border: 1px solid rgba(255, 193, 7, 0.3);">
                <h4 style="color: #856404; margin-bottom: 0.5rem;">üí° Profile Tips</h4>
                <ul style="color: #856404; margin: 0; padding-left: 1.5rem;">
                    <li>Keep your contact information current for important notifications</li>
                    <li>Update your expertise area to help with course assignments</li>
                    <li>Academic credentials help establish credibility with students</li>
                    <li>Research publications showcase your academic achievements</li>
                </ul>
            </div>
        </section>
    </main>
    
    <footer>
        <p>¬© 2025 EduAI - Smart Question Answer System. All rights reserved.</p>
    </footer>

    <script>
        function toggleSidebar() {
            document.querySelector('.sidebar').classList.toggle('closed');
            document.querySelector('main').classList.toggle('full-width');
        }

        // Form validation feedback
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.querySelector('form[method="POST"]');
            const inputs = form.querySelectorAll('input[required]:not([readonly]), select[required], textarea[required]');
            
            inputs.forEach(input => {
                input.addEventListener('blur', function() {
                    if (this.value.trim() === '') {
                        this.style.borderColor = '#ff6b6b';
                    } else {
                        this.style.borderColor = '#27ae60';
                    }
                });
            });
        });
    </script>
</body>
</html>